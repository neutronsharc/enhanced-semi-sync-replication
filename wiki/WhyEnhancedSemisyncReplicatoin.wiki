#summary One-sentence summary of this page.

= Why Enhanced-Semi-sync-Replicatoin =

Semi-sync is cool. But in the semi-sync solution, there are “phantom read”: When InnoDB commit a transaction and no slave have accept the binary log, at the time another “new thread” still can read the data generated by this transaction. If database crash and gone(can't startup anymore) at this right time, although we have ever read these data, it's not exist in any slave and we think this transaction is never happened.

In our application architecture, if our “new thread” read “phantom data”, we will try to do some work about user's critical information. So we must not read the “phantom data”.

So,we add a new variables for semi-sync "rpl_semi_sync_master_wait_before_commit".Once you set this variables ON, MySQL(InnoDB) will not commit the transaction until at least one slave get the binary log. By default, it is OFF and semi-sync act as the original way.

= The different between the oring Semi-sync and Enhanced semi-sync Replication =


= Details =

Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages